## **📝 온보딩 기능 명세서**

### **1\. 프론트엔드 기능명세서**

#### **1.1. 화면 레이아웃 및 디자인 명세**

**1\) 페이지: 온보딩 정보 입력 (app/onboarding/page.tsx)**

* **개요**: 사용자가 서비스 이용에 필요한 초기 정보를 입력하는 페이지입니다.  
* **레이아웃**:  
  * 페이지 중앙에 콘텐츠를 배치하며, 상단에 뒤로가기 아이콘이 위치합니다. 1  
  * 화면 제목(H1)으로 "더 정확한 맞춤 답변을 위해 아기에 대해 알려주세요\!"를 표시합니다. 2  
  * 페이지의 모든 기능적 로직과 상태 관리는 OnboardingForm 클라이언트 컴포넌트에서 처리합니다.

**2\) 컴포넌트: 온보딩 폼 (app/onboarding/OnboardingForm.tsx)**

* **속성**: Client Component ('use client')로 선언하여 사용자의 입력과 상태 변화를 실시간으로 처리합니다.  
* **컴포넌트 상세**:  
  * **아기 태명 입력 필드**  
    * **ShadCN 컴포넌트**: Input 3  
    * **위치**: components/ui/input.tsx  
    * **명세**: placeholder로 "예: 튼튼이"를 표시합니다. 4 사용자가 입력 시, 테두리 색상이 주요 색상(Soft Blue)으로 변경됩니다. 5  
  * **출산 예정일 선택**  
    * **ShadCN 컴포넌트**: Popover 내부에 Calendar를 사용합니다.  
    * **위치**: components/ui/popover.tsx, components/ui/calendar.tsx  
    * **명세**: 사용자가 날짜 선택 Button을 클릭하면 Popover가 열리고, 그 안에 Calendar가 나타나 날짜를 선택할 수 있습니다. 6 초기에는 "YYYY.MM.DD" 형식의 placeholder가 보입니다. 7  
  * **아기 성별 선택**  
    * **ShadCN 컴포넌트**: ToggleGroup  
    * **위치**: components/ui/toggle-group.tsx  
    * **명세**: '남아', '여아', '아직 몰라요' 3개의 ToggleGroupItem으로 구성된 단일 선택 그룹입니다. 8 선택된 항목은 주요 색상 배경에 흰색 텍스트로 표시됩니다. 9  
  * **나의 관계 선택**  
    * **ShadCN 컴포넌트**: ToggleGroup  
    * **위치**: components/ui/toggle-group.tsx  
    * **명세**: '엄마', '아빠' 2개의 ToggleGroupItem으로 구성된 단일 선택 그룹입니다. 10101010 선택된 항목의 스타일은 성별 선택과 동일합니다. 11  
  * **완료 버튼**  
    * **ShadCN 컴포넌트**: Button 12  
    * **위치**: components/ui/button.tsx  
    * **명세**: 모든 정보(태명, 예정일, 성별, 관계)가 입력되기 전까지는 '비활성화(Disabled)' 상태로 표시됩니다. 13 모든 정보가 입력되면 '활성화(Primary)' 상태로 변경됩니다. 14

#### **1.2. 사용자 흐름 및 상호작용**

1. 사용자가 온보딩 페이지(app/onboarding)에 진입합니다.  
2. 폼의 모든 입력 필드는 비어있고, '완료' 버튼은 비활성화 상태입니다. 15  
3. 사용자가 각 필드(태명, 예정일, 성별, 관계)에 정보를 입력/선택합니다.  
4. OnboardingForm 컴포넌트는 useState를 사용해 각 입력 값과 폼 전체의 유효성 상태를 관리합니다.  
5. 모든 필수 정보가 입력되면, '완료' 버튼이 활성화 상태로 변경됩니다.  
6. 사용자가 '완료' 버튼을 클릭하면, submitOnboardingData Server Action이 호출됩니다.  
7. Server Action 실행이 성공하면, 사용자는 개인화된 정보가 반영된 메인 챗봇 화면(app/chat/page.tsx)으로 리디렉션됩니다. 페이지 전환 시 부드러운 슬라이드-인 효과가 적용됩니다. 16

#### **1.3. API 연동**

* **Next.js Server Actions**를 사용하여 폼 데이터를 서버에 전송합니다. 별도의 API Route를 생성하지 않습니다.  
* **호출 대상**: app/onboarding/actions.ts에 정의된 submitOnboardingData 함수  
* **전달 데이터**: 사용자가 입력한 폼 데이터 객체 ({ nickname, dueDate, gender, relation })

#### **1.4. 테스트 항목**

* \[ \] 온보딩 페이지 최초 진입 시 '완료' 버튼이 비활성화 상태인지 확인합니다.  
* \[ \] 모든 입력 필드가 채워졌을 때 '완료' 버튼이 활성화되는지 확인합니다.  
* \[ \] 입력 필드 중 하나라도 비워졌을 때 '완료' 버튼이 다시 비활성화되는지 확인합니다.  
* \[ \] '완료' 버튼 클릭 시 메인 챗봇 페이지로 정상적으로 이동하는지 확인합니다.  
* \[ \] 출산 예정일 캘린더가 정상적으로 표시되고 날짜 선택이 가능한지 확인합니다.

### **2\. 백엔드 기능명세서**

#### **2.1. API 정의 (Server Action)**

* **파일 위치**: app/onboarding/actions.ts  
* **함수 (Action)**: submitOnboardingData  
* **역할**: 게스트 사용자의 온보딩 정보를 받아 임시 저장하고, 메인 페이지로 리디렉션합니다.  
* **파라미터**: formData: FormData \- 클라이언트 폼에서 전달된 데이터  
* **처리 로직**:  
  1. formData에서 nickname, dueDate, gender, relation 값을 추출하고 유효성을 검증합니다.  
  2. 추출된 사용자 정보를 객체 형태로 구성합니다.  
  3. **(게스트 상태 유지)** 로그인 전이므로, 해당 정보를 DB에 저장하지 않고 \*\*쿠키(Cookie)\*\*에 저장하여 게스트 세션을 유지합니다. 쿠키는 httpOnly, secure 옵션을 사용하여 안전하게 관리합니다.  
  4. Next.js의 redirect 함수를 사용해 사용자를 메인 챗봇 페이지 (/chat)로 리디렉션합니다.

#### **2.2. 데이터베이스 설계 및 연동**

* **해당 없음**: 온보딩 단계에서는 데이터베이스에 직접적인 **쓰기(Write) 작업을 수행하지 않습니다.** 사용자 데이터는 로그인 기능 구현 후, 사용자의 명시적 동의 하에 데이터베이스에 저장됩니다.

#### **2.3. 테스트 항목**

* \[ \] 유효한 폼 데이터를 submitOnboardingData 액션으로 전달했을 때, 사용자 정보가 포함된 쿠키가 정상적으로 생성되는지 확인합니다.  
* \[ \] 액션 호출 후 /chat 경로로 성공적으로 리디렉션되는지 확인합니다.  
* \[ \] 불완전하거나 유효하지 않은 데이터로 액션을 호출했을 때, 오류를 반환하거나 리디렉션이 발생하지 않는지 확인합니다.

---

이상으로 온보딩 기능에 대한 명세서 작성을 마칩니다.  
검토 후 피드백이 있으시면 말씀해주시고, 없으시면 다음으로 개발할 기능을 선택해주세요.

1. **기본 채팅 기능**  
2. **AI 챗봇 연동 및 로그인**  
3. **대화 기록 관리 및 부가 기능**